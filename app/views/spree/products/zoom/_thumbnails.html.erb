<!-- no need for thumnails unless there is more then one image -->
<% if @product.images.empty? %>
<%= link_to image_tag(i.attachment.url(:mini)), i.attachment.url(:product), :rel => "{gallery: 'product-gallery', smallimage: '"  + i.attachment.url(:product) + "',largeimage: '" + i.attachment.url(:large) + "'}" %>
<% else %>
<%= link_to image_tag(i.attachment.url(:mini)), @product.images.first.attachment.url(:product), :rel => "{gallery: 'product-gallery', smallimage: '"  + i.attachment.url(:product) + "',largeimage: '" + i.attachment.url(:large) + "'}", class: "(i.id == @product.images.first.id) ? 'zoomThumbActive' : ''" %>
<% end %>